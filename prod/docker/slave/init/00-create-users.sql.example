-- ============================================
-- Slave DB MaxScale 사용자 생성
-- MaxScale이 직접 Slave에 연결할 때 필요
-- ============================================

-- MaxScale 모니터 사용자
CREATE USER IF NOT EXISTS 'maxscale_monitor'@'%' IDENTIFIED BY 'CHANGE_THIS_MONITOR_PASSWORD';
GRANT REPLICATION CLIENT, REPLICATION SLAVE ON *.* TO 'maxscale_monitor'@'%';
GRANT SLAVE MONITOR ON *.* TO 'maxscale_monitor'@'%';
GRANT SELECT ON mysql.user TO 'maxscale_monitor'@'%';
GRANT SELECT ON mysql.db TO 'maxscale_monitor'@'%';
GRANT SELECT ON mysql.tables_priv TO 'maxscale_monitor'@'%';
GRANT SELECT ON mysql.columns_priv TO 'maxscale_monitor'@'%';
GRANT SELECT ON mysql.procs_priv TO 'maxscale_monitor'@'%';
GRANT SELECT ON mysql.proxies_priv TO 'maxscale_monitor'@'%';
GRANT SELECT ON mysql.roles_mapping TO 'maxscale_monitor'@'%';
GRANT SHOW DATABASES ON *.* TO 'maxscale_monitor'@'%';

-- MaxScale 라우터 사용자
CREATE USER IF NOT EXISTS 'maxscale_router'@'%' IDENTIFIED BY 'CHANGE_THIS_ROUTER_PASSWORD';
GRANT SELECT ON *.* TO 'maxscale_router'@'%';

FLUSH PRIVILEGES;
